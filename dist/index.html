<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>VR</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="bundle.js"></script>
  </head>
  <body>
    <a-scene astats>

      <a-plane id="navmesh" visible="false" rotation="-90 0 0" height="20" width="20" material="color: brown"></a-plane>

      <a-box
        id="tardis"
        hover-highlighter
        aanimate-rotation="speed: 10; axe: y"
        position="1 1 -5"
        material="color: red"
        emit-when-near="target: #head; distance: 1; event: teleport;"
      ></a-box>


      <a-box id="click-me"
        cursor-listener
        aanimate-rotation__y="speed: 10; axe: y"
        aanimate-rotation__x="speed: 10; axe: x"
        position="3 0 -5"
        material="color: green"
        hover-highlighter
        on-event-set__near="event: click; attribute: material.color; value: tomato"
        on-event-set__far="event: unclick; attribute: material.color; value: green"
        emit-when-near="target: #head; distance: 2; event: click; eventFar: unclick"
      ></a-box>

      <im-box size="1" position="2 0 -2" color="tomato" hover-highlighter>

      </im-box>

      <a-entity
        position="0 1.25 -2"
        animation__open="startEvents: open; property: rotation.y; to: 90; dur: 2000; easing: linear; loop: false"
        animation__close="startEvents: close; property: rotation.y; to: 0; dur: 2000; easing: linear; loop: false"
        listen-to__open="evt: open; target: #door1; emit: open"
        listen-to__close="evt: close; target: #door1; emit: close"
      >
        <a-box
          id="door1"
          depth="0.2"
          width="1.25"
          height="2.5"
          color="pink"
          position="0.675 0 0"
          cursor-listener
          hover-highlighter
          toggle-events="sourceEvt: click; evt1: open; evt2: close"
          emit-when-near="target: #head; distance: 2; event: click; eventFar: click"
        ></a-box>
      </a-entity>

      <a-entity id="camera-rig">
        <a-entity id="head"
          camera
          wasd-controls
          simple-navmesh-constraint="navmesh: #navmesh"
          look-controls="pointerLockEnabled: true"
          position="0 1.6 0"
          listen-to="target: #tardis; evt: teleport; emit: teleport"
          on-event-set="event: teleport; attribute: position; value: 0 1.6 0"
        >
          <a-entity
            geometry="primitive: circle; radius: 0.0005"
            material="shader: flat; color: black"
            position="0 0 -0.1"
            visible="true"
            cursor
            raycaster="far: 10; objects: [cursor-listener], [hover-highlighter]"
          ></a-entity>
        </a-entity>
      </a-entity>
    </a-scene>
  </body>
</html>
